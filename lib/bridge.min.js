!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).GTJABridge=n()}(this,function(){"use strict";var e={},n=window.navigator,i=n.userAgent.toLowerCase();var a=/android|htc/.test(i)||/linux/i.test(n.platform+""),t=!a&&/iphone|ipad|ipad/i.test(i);e="undefined"==typeof navigator?{isAndroid:a,isiOS:t,node:!0}:{isAndroid:a,isiOS:t,node:!1};var o={call:function(e,n,i){var a=Math.floor(4e4*Math.random()+1e3),t=window.location.href,o="gtcb_"+a;i&&(window[o]=i),window.JunhongJSBridge.exec(t,e,o,JSON.stringify(n))},callbackFromNative:function(e,n){if(e){var i=window[e];if(!i)return;i(n)}},sendDeviceReadyEvent:function(){var e=document.createEvent("Events");e.initEvent("deviceready",!1,!1),document.dispatchEvent(e)}};var r={},d=1,c={call:function(e,n,i){n=n||{},n=JSON.parse(JSON.stringify(n));var a="cb_"+d+++"_"+(new Date).getTime();i&&(r[a]=i);var t={name:e,data:n,callbackId:a};window.webkit.messageHandlers.JunhongJSBridge.postMessage(t)},_handleMessage:function(e){if(e.responseId){var n=r[e.responseId];if(!n)return;n(e.responseData),e.keepCallback||delete r[e.responseId]}}};var s,l=e.isAndroid?function(e,n,i){return window.GtjaJSBridge={call:o.call,callbackFromNative:o.callbackFromNative},o.call(e,n,i)}:function(e,n,i){return window.GTJAJSBridge={call:c.call,_handleMessage:c._handleMessage},c.call(e,n,i)};return"undefined"==typeof process||"miniapp"!==process.env.RUNTIME?-1<navigator.userAgent.toLowerCase().indexOf("gtja")&&(s={call:function(e,n,i){window.GtjaJSBridge&&window.GtjaJSBridge.call?window.GtjaJSBridge.call(e,n,i):l(e,n,i)}}):"miniapp"===process.env.RUNTIME&&(s=LightJSBridge),{callNative:function(e,n,i){s.call(e,n,function(e){i&&i(e)})}}});
